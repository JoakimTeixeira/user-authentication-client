(this["webpackJsonpuser-authentication-client"]=this["webpackJsonpuser-authentication-client"]||[]).push([[0],{83:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),s=a(26),o=a.n(s),i=a(7),l=a.n(i),u=a(9),j=a(10),b=function(){return localStorage.getItem("auth-token")||""},p=Object(n.createContext)(),h=function(e){var t=e.children,a=Object(n.useState)(void 0),c=Object(j.a)(a,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b()&&s||localStorage.setItem("auth-token","");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsx)(p.Provider,{value:{userData:s,setUserData:o},children:t})},d=a(86),m=a(16),O=a(6),x=a(87),f=a(85),v=a(14),g=a.n(v),C=a(29),k=a(36),w=function(e,t,a){a(Object(k.a)(Object(k.a)({},t),{},Object(C.a)({},e.target.name,e.target.value)))},N=a(90),y=function(e){var t=e.isError,a=e.clearError;return Object(r.jsx)(N.a,{variant:"danger",onClose:a,dismissible:!0,children:t})},G=y;y.defaultProps={isError:void 0};var E=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),o=Object(j.a)(s,2),i=o[0],b=o[1],h=Object(n.useContext)(p).setUserData,d=Object(O.g)(),m=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r=a,e.next=5,g.a.post("https://joakim-user-authentication-api.herokuapp.com/users/login",r);case 5:n=e.sent,h(n.data.user),localStorage.setItem("auth-token",n.data.token),d.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&b(e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(x.a,{children:[i&&Object(r.jsx)(G,{isError:i,clearError:function(){return b(void 0)}}),Object(r.jsxs)(x.a.Group,{controlId:"formGridEmail",children:[Object(r.jsx)(x.a.Label,{children:"Email"}),Object(r.jsx)(x.a.Control,{name:"email",type:"email",placeholder:"johndoe@email.com","aria-label":"Email",value:a.email,onChange:function(e){return w(e,a,c)}})]}),Object(r.jsxs)(x.a.Group,{controlId:"formGridPassword1",children:[Object(r.jsx)(x.a.Label,{children:"Password"}),Object(r.jsx)(x.a.Control,{name:"password",type:"password","aria-label":"Password",value:a.password,onChange:function(e){return w(e,a,c)}})]}),Object(r.jsx)(f.a,{variant:"primary",type:"submit",onClick:m,children:"Login"})]})},L=a(51),P=function(){var e=Object(n.useState)({name:"",email:"",phoneNumber:"",cpf:"",password:"",passwordCheck:""}),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),o=Object(j.a)(s,2),i=o[0],b=o[1],p=Object(O.g)(),h=function(){var e=Object(u.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r=a,e.next=5,g.a.post("https://joakim-user-authentication-api.herokuapp.com/users/register",r);case 5:p.push("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response.data.msg&&b(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(x.a,{children:[i&&Object(r.jsx)(G,{isError:i,clearError:function(){return b(void 0)}}),Object(r.jsxs)(x.a.Row,{children:[Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridName",children:[Object(r.jsx)(x.a.Label,{children:"Name"}),Object(r.jsx)(x.a.Control,{name:"name",type:"text",placeholder:"John Doe","aria-label":"Name",value:a.name,onChange:function(e){return w(e,a,c)}})]}),Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridEmail",children:[Object(r.jsx)(x.a.Label,{children:"Email"}),Object(r.jsx)(x.a.Control,{name:"email",type:"email",placeholder:"johndoe@email.com","aria-label":"Email",value:a.email,onChange:function(e){return w(e,a,c)}})]})]}),Object(r.jsxs)(x.a.Row,{children:[Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridPhoneNumber",children:[Object(r.jsx)(x.a.Label,{children:"Phone Number"}),Object(r.jsx)(x.a.Control,{name:"phoneNumber",type:"text",placeholder:"9999999999","aria-label":"Phone Number",value:a.phoneNumber,onChange:function(e){return w(e,a,c)}})]}),Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridCpf",children:[Object(r.jsx)(x.a.Label,{children:"Cpf"}),Object(r.jsx)(x.a.Control,{name:"cpf",type:"text",placeholder:"99999999999","aria-label":"Cpf",value:a.cpf,onChange:function(e){return w(e,a,c)}})]})]}),Object(r.jsxs)(x.a.Row,{children:[Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridPassword1",children:[Object(r.jsx)(x.a.Label,{children:"Password"}),Object(r.jsx)(x.a.Control,{name:"password",type:"password","aria-label":"Password",value:a.password,onChange:function(e){return w(e,a,c)}})]}),Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridPassword2",children:[Object(r.jsx)(x.a.Label,{children:"Password Check"}),Object(r.jsx)(x.a.Control,{name:"passwordCheck",type:"password","aria-label":"Password Check",value:a.passwordCheck,onChange:function(e){return w(e,a,c)}})]})]}),Object(r.jsx)(f.a,{variant:"primary",type:"submit",onClick:h,children:"Register"})]})};var D=function(){return Object(r.jsx)("h1",{className:"text-center",children:"Home page"})},I=a(89),S=a(88),U=function(){var e=Object(n.useContext)(p),t=e.userData,a=e.setUserData,c=Object(O.g)();return Object(r.jsxs)(I.a,{bg:"light",expand:"lg",children:[Object(r.jsx)(I.a.Brand,{as:m.b,to:t?"/":"/login",children:"LOGO"}),Object(r.jsx)(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(r.jsx)(I.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end",children:Object(r.jsx)(S.a,{className:"mr-2",children:t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(S.a.Link,{as:m.c,to:"/".concat(t.id),exact:!0,children:"User Settings"}),Object(r.jsx)(f.a,{onClick:function(){a(void 0),localStorage.setItem("auth-token",""),c.push("/")},children:"Logout"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(S.a.Link,{as:m.c,to:"/register",exact:!0,children:"Register"}),Object(r.jsx)(S.a.Link,{as:m.c,to:"/login",exact:!0,children:"Login"})]})})})]})};var R=function(e){var t=e.user,a=e.setUser,c=e.resetFields,s=Object(n.useContext)(p),o=s.userData,i=s.setUserData,j=function(){var e=Object(u.a)(l.a.mark((function e(a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r={id:o.id,name:t.name||o.name,email:t.email||o.email,phoneNumber:t.phoneNumber||o.phoneNumber,cpf:t.cpf||o.cpf},e.next=4,g.a.put("https://joakim-user-authentication-api.herokuapp.com/users/".concat(o.id),r,{headers:{"x-auth-token":b(),"Content-Type":"application/json"}});case 4:i(r),c();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("article",{className:"mt-5",children:[Object(r.jsx)("h2",{className:"mb-3",children:"Update user information"}),Object(r.jsxs)(x.a,{children:[Object(r.jsxs)(x.a.Row,{children:[Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridName",children:[Object(r.jsx)(x.a.Label,{children:"Name"}),Object(r.jsx)(x.a.Control,{name:"name",type:"text",placeholder:"John Doe","aria-label":"Name",value:t.name,onChange:function(e){return w(e,t,a)}})]}),Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridEmail",children:[Object(r.jsx)(x.a.Label,{children:"Email"}),Object(r.jsx)(x.a.Control,{name:"email",type:"email",placeholder:"johndoe@email.com","aria-label":"Email",value:t.email,onChange:function(e){return w(e,t,a)}})]})]}),Object(r.jsxs)(x.a.Row,{children:[Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridPhoneNumber",children:[Object(r.jsx)(x.a.Label,{children:"Phone Number"}),Object(r.jsx)(x.a.Control,{name:"phoneNumber",type:"number",placeholder:"9999999999","aria-label":"Phone Number",value:t.phoneNumber,onChange:function(e){return w(e,t,a)}})]}),Object(r.jsxs)(x.a.Group,{as:L.a,controlId:"formGridCpf",children:[Object(r.jsx)(x.a.Label,{children:"Cpf"}),Object(r.jsx)(x.a.Control,{name:"cpf",type:"number",placeholder:"99999999999","aria-label":"Cpf",value:t.cpf,onChange:function(e){return w(e,t,a)}})]})]}),Object(r.jsx)(f.a,{variant:"primary",type:"submit",onClick:j,children:"Update"})]})]})};var F=function(e){var t=e.resetFields,a=Object(n.useContext)(p),c=a.userData,s=a.setUserData,o=Object(O.g)(),i=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,g.a.delete("https://joakim-user-authentication-api.herokuapp.com/users/".concat(c.id),{headers:{"x-auth-token":b()}});case 3:t(),s(void 0),o.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("article",{className:"mt-5",children:[Object(r.jsx)("h2",{className:"mb-3",children:"Remove Account"}),Object(r.jsx)(f.a,{variant:"danger",type:"submit",onClick:i,children:"Remove my account"})]})};var J=function(){var e=Object(n.useContext)(p).userData,t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){(function(){var t=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("https://joakim-user-authentication-api.herokuapp.com/users/".concat(e.id),{headers:{"x-auth-token":b()}});case 2:a=t.sent,s(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(r.jsxs)("article",{className:"mt-5",children:[Object(r.jsx)("h2",{className:"mb-3",children:"User information"}),c&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:"Name: ".concat(c.data.name)}),Object(r.jsx)("p",{children:"Email: ".concat(c.data.email)}),Object(r.jsx)("p",{children:"Phone Number: ".concat(c.data.phoneNumber)}),Object(r.jsx)("p",{children:"Cpf: ".concat(c.data.cpf)})]})]})};var T=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),a=t[0],c=t[1],s=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://joakim-user-authentication-api.herokuapp.com/users/auth/".concat(b()),null);case 2:t=e.sent,c(t.data.token);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("article",{className:"mt-5",children:[Object(r.jsx)("h2",{className:"mb-3",children:"User token (JWT)"}),a&&Object(r.jsx)("p",{className:"text-break",children:"Token: ".concat(a)}),Object(r.jsx)(f.a,{variant:"primary",type:"submit",onClick:s,children:"Get token"})]})},B=function(){var e=Object(n.useState)({name:"",email:"",phoneNumber:"",cpf:""}),t=Object(j.a)(e,2),a=t[0],c=t[1],s=function(){c({name:"",email:"",phoneNumber:"",cpf:""})};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"text-center",children:"User Settings"}),Object(r.jsx)(J,{}),Object(r.jsx)(R,{user:a,setUser:c,resetFields:s}),Object(r.jsx)(F,{resetFields:s}),Object(r.jsx)(T,{})]})},A=function(e){var t=e.component,a=e.path,c=Object(n.useContext)(p).userData;return Object(r.jsx)(O.b,{path:a,render:function(){return c?Object(r.jsx)(t,{}):Object(r.jsx)(O.a,{to:"/login"})}})};var H=function(){return Object(r.jsxs)(m.a,{children:[Object(r.jsx)(U,{}),Object(r.jsx)(d.a,{className:"col-md-6 mt-5 mb-5",children:Object(r.jsxs)(O.d,{children:[Object(r.jsx)(A,{exact:!0,path:"/",component:D}),Object(r.jsx)(O.b,{path:"/login",component:E}),Object(r.jsx)(O.b,{path:"/register",component:P}),Object(r.jsx)(A,{path:"/:id",component:B})]})})]})};var M=function(){return Object(r.jsx)(h,{children:Object(r.jsx)(H,{})})};a(82);o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(M,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.220b01e5.chunk.js.map